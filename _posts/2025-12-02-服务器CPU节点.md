---
title: "服务器CPU节点"
toc: true
toc_label: "文章目录"  # 自定义目录标题
toc_icon: "list-ul"   # 可选：使用Font Awesome图标
lang: zh-CN
categories:
  - Blog
tags:
  - CPU
---

## 1. 概述

- Yang Group HFNL 服务器共有`36`个`CPU`计算节点，各节点`128`核，`503 GB` 内存；

- `CPU`型号为`AMD EPYC 7763 64-Core Processor`，主频`1500 MHz`，计算频率`2450 MHz`。

---

## 2. 队列设置

| **队列名**       | **时间限制** |
|:----------------:|:-----------:|
| `short`（默认队列） | 3天      |
| `normal`         | 6天         |
| `long`           | 12天        |

## 3. 用户限制

**单用户限制所有队列同时运行<font color=red>6</font>个任务，提交<font color=red>8</font>个任务。暂无限制核数，请合理分配利用计算资源。**

## 4. 使用方法

1. `sbatch`脚本提交任务，例如：
    示例脚本 `cpu.sh`：

    ```bash
    #!/bin/bash
    #SBATCH -J test
    #SBATCH -p short
    #SBATCH -N 1
    #SBATCH -n 128
    #SBATCH -o %j.log
    #SBATCH -e %j.err
    echo "SLURM_JOB_PARTITION=$SLURM_JOB_PARTITION"
    echo "SLURM_JOB_NODELIST=$SLURM_JOB_NODELIST"
    echo Time is `date`
    echo Directory is $PWD
    echo This job runs on the following nodes:
    echo $SLURM_JOB_NODELIST
    echo This job has allocated $SLURM_JOB_CPUS_PER_NODE cpu cores.

    module purge
    #module load apps/vasp/oneapi/2024.1.0/6.3.0
    #module load apps/vasp/amd/aocc_aocl/3.2.0/5.4.4
    module load apps/vasp/amd/aocc_aocl/3.2.0/6.4.3_omp
    #module load apps/vasp/intelmpi/5.4.4_IOPTCELL
    srun hostname -s | sort -n >slurm.hosts

    mpirun $MPIOPT -machinefile slurm.hosts vasp_std > runlog
    ```

    提交命令：`sbatch cpu.sh`
2. 通过网页`172.16.39.95:6080/jump.gleamoe.com:8005`便捷监控作业情况；
3. 作业加时请联系管理员。
